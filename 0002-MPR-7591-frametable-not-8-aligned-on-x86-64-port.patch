From 22dbcdfb921b19d171134de90984805622877e55 Mon Sep 17 00:00:00 2001
From: Xavier Leroy <xavier.leroy@inria.fr>
Date: Sat, 22 Jul 2017 16:32:23 -0400
Subject: [PATCH 02/12] MPR#7591: frametable not 8-aligned on x86-64 port

Cherry-pick of 7077b60 from trunk.
---
 Changes                | 7 +++++++
 asmcomp/amd64/emit.mlp | 3 ++-
 2 files changed, 9 insertions(+), 1 deletion(-)

diff --git a/Changes b/Changes
index 10642f19d..cc7e0a82f 100644
--- a/Changes
+++ b/Changes
@@ -1,3 +1,10 @@
+Working 4.05.x branch
+---------------------
+
+- MPR#7591, GPR#1257: on x86-64, frame table is not 8-aligned
+  (Xavier Leroy, report by Mantis user "voglerr", review by Gabriel Scherer)
+
+
 OCaml 4.05.0 (13 Jul 2017):
 ---------------------------
 
diff --git a/asmcomp/amd64/emit.mlp b/asmcomp/amd64/emit.mlp
index c3f8692a8..75a785f74 100644
--- a/asmcomp/amd64/emit.mlp
+++ b/asmcomp/amd64/emit.mlp
@@ -1065,8 +1065,9 @@ let end_assembly() =
 
   D.data ();
   emit_global_label "data_end";
-  D.long (const 0);
+  D.qword (const 0);
 
+  D.align 8;                            (* PR#7591 *)
   emit_global_label "frametable";
 
   let setcnt = ref 0 in
-- 
2.13.2

